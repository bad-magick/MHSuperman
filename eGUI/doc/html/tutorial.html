<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>[Tutorial] eGUI++ - Easy GUI</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1><a class="anchor" name="tutorial">[Tutorial] eGUI++ - Easy GUI</a></h1><ul>
<li><a class="el" href="tutorial.html#tutorial_motivation">Motivation</a></li><li><a class="el" href="tutorial.html#tutorial_installation">Installation</a></li><li><a class="el" href="tutorial.html#tutorial_boost">Based on Boost</a></li><li><a class="el" href="tutorial.html#tutorial_windows">Windows</a></li><li><a class="el" href="tutorial.html#tutorial_usd_to_eur">Case in point : USD to EUR conversion</a></li><li><a class="el" href="tutorial.html#tutorial_controls">Where are the controls defined?</a></li><li><a class="el" href="tutorial.html#tutorial_forms">Forms</a></li><li><a class="el" href="tutorial.html#tutorial_events">Events</a></li><li><a class="el" href="tutorial.html#tutorial_devel">Development</a></li><li><a class="el" href="tutorial.html#tutorial_volunteer">Volunteers</a></li></ul>
<h2><a class="anchor" name="tutorial_motivation">
Motivation</a></h2>
Yes, I've written eGUI to finally have a GUI lib that is straightforward, both to read, and write.<p>
My goals:<ul>
<li>make GUI code easy to read</li><li>make GUI code easy to write</li><li>benefit from code completion whenever possible</li><li>make GUI programming safe<ul>
<li>in case there’s an error, catch it at compile time whenever possible; otherwise, at runtime, an exception is thrown</li></ul>
</li><li>Resource Editor friendly<ul>
<li>Integration with VS 2005+ Resource Editor</li></ul>
</li><li>no message maps</li><li>No need to include &lt;windows.h&gt; in client code. This was quite bold, but I've made it. You want a library that abstracts away the Win32 API FULLY, here it is.</li></ul>
<h2><a class="anchor" name="tutorial_installation">
Installation</a></h2>
Go to your install directory, and follow the instructions there. Why install? So that you'll benefit from the integration of eGUI with VC2005.<h2><a class="anchor" name="tutorial_boost">
Based on Boost</a></h2>
Yes, Boost (www.boost.org) is quite a cool collection of libs, so why reinvent the wheel. I've used some of their libs<ul>
<li>rest assured, I've used only head-only libs, so no extra .lib dependencies there</li></ul>
<h2><a class="anchor" name="tutorial_windows">
Windows</a></h2>
Dealing with windows is quite simple:<ul>
<li>always use <code><a class="el" href="structegui_1_1wnd.html" title="Provides indirect access to on-the-screen window objects.">wnd</a>&lt; [window_name] &gt; </code> to refer to a window. Think of it as a smart pointer to the window</li><li>there's a 1-to-1 correspondence c++-object to on-the-screen-window. If the user closes the window, its corresponding c++ object becomes invalid (it's marked for destruction)</li><li>creating windows is very easy. Normally, you'll use forms (see below), but just in case you want to create the window yourself, the syntax is: <div class="fragment"><pre class="fragment">  <span class="comment">// 1</span>
  wnd&lt;&gt; w = new_&lt;some_wnd&gt;( [args]);

  <span class="comment">// 2</span>
  wnd&lt;some_wnd&gt; = new_( [args]);
</pre></div></li></ul>
<p>
Methods 1 and 2 are same.<h2><a class="anchor" name="tutorial_usd_to_eur">
Case in point : USD to EUR conversion</a></h2>
You'll find the sample in samples/tutorial/usd_to_eur.<p>
To deal with the GUI world, you create <em>forms</em> (or dialogs, if you wish). Then you put controls on them, and the handle some of their events to implement the logic.<p>
1st. The main() function:<p>
<div class="fragment"><pre class="fragment"><span class="keyword">using namespace </span>egui;
<span class="keywordtype">void</span> egui::main(<span class="keyword">const</span> main_args&amp;) {
    <span class="comment">// create a modal form. You don't need to specifically wait for an event from the modal form,</span>
    <span class="comment">// since you'll exit this function only when it's ready</span>
    wnd&lt;convert&gt;( new_( wnd_init().style(form_style::modal) ));
}
</pre></div><p>
2nd. The convert class - it's the <a class="el" href="structegui_1_1form.html">form</a> that does the conversion. It's fairly simple<p>
2A. The convert header<p>
<div class="fragment"><pre class="fragment"><span class="comment">// convert.h</span>
<span class="preprocessor">#pragma once</span>
<span class="preprocessor"></span><span class="preprocessor">#include "convert_form_resource.h"</span>
<span class="keyword">struct </span>convert :   form_resource::convert {
    convert() : rate(1.47), updating(false) {}
<span class="keyword">private</span>:
    
    <span class="keywordtype">double</span> rate;
    <span class="keywordtype">bool</span> updating;

    <span class="comment">// here we specified what notifications we're handling:</span>
    <span class="comment">// the "change" event, coming from usd, and from eur controls</span>
    <span class="keywordtype">void</span> on_change(edit::ev::change&amp;, usd_);
    <span class="keywordtype">void</span> on_change(edit::ev::change&amp;, eur_);
};
</pre></div><p>
2B. The convert source<p>
<div class="fragment"><pre class="fragment"><span class="comment">// convert.cpp</span>
<span class="preprocessor">#include "stdafx.h"</span>
<span class="preprocessor">#include "convert.h"</span>
<span class="preprocessor">#include "convert_form_resource.h.hpp"</span>
<span class="keyword">namespace </span>{
    <span class="keywordtype">double</span> to_double(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; str) { ... }
    <span class="keywordtype">string</span> to_string(<span class="keywordtype">double</span> d) { ... }
}

<span class="comment">// handle each event, and update the other control</span>
<span class="comment">// also, avoid infinite recursion</span>
<span class="keywordtype">void</span> convert::on_change(edit::ev::change&amp;, usd_) {
    <span class="keywordflow">if</span> ( updating) <span class="keywordflow">return</span>;
    updating = <span class="keyword">true</span>;
    eur-&gt;text = to_string( to_double(usd-&gt;text) / rate);
    updating = <span class="keyword">false</span>;
}
<span class="keywordtype">void</span> convert::on_change(edit::ev::change&amp;, eur_) { 
    <span class="keywordflow">if</span> ( updating) <span class="keywordflow">return</span>;
    updating = <span class="keyword">true</span>;
    usd-&gt;text = to_string( to_double(eur-&gt;text) * rate);
    updating = <span class="keyword">false</span>;
}
</pre></div><h2><a class="anchor" name="tutorial_controls">
Where are the controls defined?</a></h2>
You see in code that I'm using 'usd' and 'eur', but they're not defined anywhere. That's right - eGUI takes care of that for you (throgh the magic of "..._form_resource.h[.hpp]" files generated automatically.<p>
What just need to use the eGUI wizard to generate a <a class="el" href="structegui_1_1form.html">form</a> class. Then eGUI will take care of the extra _form_resource.* files. It will also map whatever controls are on the <a class="el" href="structegui_1_1form.html">form</a> (you edited with the Resource Editor) to C++ classes.<p>
Like, in the above case it mapped 'usd' to the editbox corresponding to the USD sum, and 'eur' to the editbox corresponding to the EUR sum.<h2><a class="anchor" name="tutorial_forms">
Forms</a></h2>
eGUI encourages <a class="el" href="structegui_1_1form.html">form</a> programmming. That is, you create forms, put controls on them (which eGUI manages automatically) Just remember, when you create the C++ <a class="el" href="structegui_1_1form.html">form</a> class corresponding to a Dialog you edited with Resource Editor, use the eGUI Wizard to add the class.<h2><a class="anchor" name="tutorial_events">
Events</a></h2>
Events/Notifications is where eGUI really shines. It's very simple:<ul>
<li>the events generated by each control, are in "&lt;control&gt;::ev" (use code-completion to find them).</li><li>event handlers are called "on_"&lt;event&gt; (where &lt;event&gt; is the name of the event from &lt;control&gt;ev</li></ul>
<p>
For instance, edit has a few notifications: <code>edit::ev::change, edit::ev::update</code>, etc. Their corresponding handler names are<ul>
<li>void on_change(edit::ev::change&amp;);</li><li>void on_update(edit::ev::update&amp;);</li></ul>
<p>
It's really easy for a <a class="el" href="structegui_1_1form.html">form</a> to handle events coming from its children:<ul>
<li>the child name is the name you assigned to the control on the Resource Editor, with the ID*_ prefix. For instance, if on Resource Editor is called IDC_username, in code it will be called 'username'</li><li>if you know the name of the event, and what control is generating it, you'll know what to override. Say you're waiting for 'update', from 'usd'. The event handler name is: void on_update(edit::ev::update&amp; e,usd_);</li><li>to see what you can do with an event (its arguments), just type "e.", and code-completion will help</li></ul>
<p>
Every event has at least the following info:<ul>
<li>.sender - the one who sent this event (it can be different from the receiver). For instance, you can forward an event to somebody else.</li></ul>
<h2><a class="anchor" name="tutorial_devel">
Development</a></h2>
At this time, the library is under development, by an army of one (me). It's in alpha state (at the time of writing, 2 June 2008), even though knowing that I've developed anther GUI lib 2 years ago, I'd say this will get stable quite quickly.<h2><a class="anchor" name="tutorial_volunteer">
Volunteers</a></h2>
There's plenty of possible improvement, so if you'd like to contribute/test, your help is most welcome! Just drop me an email - you know where to find me ;) <hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 2 10:04:32 2008 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
