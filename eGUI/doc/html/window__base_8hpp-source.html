<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>D:/john/uk/ideas/eGUI/egui wc/egui/core/detail/window_base.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1>D:/john/uk/ideas/eGUI/egui wc/egui/core/detail/window_base.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// window_base.hpp</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">// Easy GUI Library</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">// Copyright (C) 2008 John Torjo (see http://torjo.com/contact/ for email)</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">// Permission to copy, use, sell and distribute this software is granted</span>
<a name="l00008"></a>00008 <span class="comment">// provided this copyright notice appears in all copies.</span>
<a name="l00009"></a>00009 <span class="comment">// Permission to modify the code and to distribute modified code is granted</span>
<a name="l00010"></a>00010 <span class="comment">// provided this copyright notice appears in all copies, and a notice</span>
<a name="l00011"></a>00011 <span class="comment">// that the code was modified is included with the copyright notice.</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// This software is provided "as is" without express or implied warranty,</span>
<a name="l00014"></a>00014 <span class="comment">// and with no claim as to its suitability for any purpose.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// You can find the latest version of this library at http://www.torjo.com/egui/</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef JT07022008_window_base_HPP_DEFINED</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define JT07022008_window_base_HPP_DEFINED</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1020)</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor"># pragma once</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include "egui/core/detail/property.hpp"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include "egui/core/detail/handle_event_base.hpp"</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="keyword">namespace </span>egui {
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#ifdef BUILDING_EGUI</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="keyword">namespace </span>detail { 
<a name="l00034"></a>00034     <span class="keyword">struct </span>window_manager; 
<a name="l00035"></a>00035     <span class="keyword">struct </span>event_manager;
<a name="l00036"></a>00036 }
<a name="l00037"></a>00037 <span class="preprocessor">#endif</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a>00039 <span class="keyword">namespace </span>ev {
<a name="l00040"></a>00040     <span class="keyword">struct </span>new_event_base;
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">namespace </span>types {
<a name="l00045"></a><a class="code" href="structegui_1_1types_1_1shown.html">00045</a>     <span class="keyword">struct </span><a class="code" href="structegui_1_1types_1_1shown.html">shown</a> {
<a name="l00046"></a>00046         <span class="keyword">enum</span> type {
<a name="l00047"></a>00047             maximize, normally, minimize
<a name="l00048"></a>00048         };
<a name="l00049"></a>00049     };
<a name="l00050"></a>00050 
<a name="l00052"></a><a class="code" href="structegui_1_1types_1_1id.html">00052</a>     <span class="keyword">struct </span><a class="code" href="structegui_1_1types_1_1id.html">id</a> {
<a name="l00053"></a>00053         <a class="code" href="structegui_1_1types_1_1id.html">id</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* unique) : unique(unique) {}
<a name="l00054"></a>00054         <span class="keyword">const</span> <span class="keywordtype">void</span> * unique;
<a name="l00055"></a>00055     };
<a name="l00056"></a>00056 
<a name="l00058"></a><a class="code" href="structegui_1_1types_1_1scroll__bar__type.html">00058</a>     <span class="keyword">struct </span><a class="code" href="structegui_1_1types_1_1scroll__bar__type.html">scroll_bar_type</a> {
<a name="l00059"></a>00059         <span class="keyword">enum</span> type {
<a name="l00060"></a>00060             horiz , vert, ctrl
<a name="l00061"></a>00061         };
<a name="l00062"></a>00062     };
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <span class="keyword">struct </span>capture {
<a name="l00065"></a>00065         <span class="keyword">enum</span> type {
<a name="l00066"></a>00066             mouse = 1, keyboard = 2
<a name="l00067"></a>00067         };
<a name="l00068"></a>00068     };
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="keyword">struct </span>style {
<a name="l00072"></a>00072         <span class="comment">// Style</span>
<a name="l00073"></a>00073 
<a name="l00075"></a>00075         <span class="keyword">static</span> <span class="keyword">const</span> int64    border           = 0x00800000L; 
<a name="l00077"></a>00077         <span class="keyword">static</span> <span class="keyword">const</span> int64    caption          = 0x00C00000L; 
<a name="l00079"></a>00079         <span class="keyword">static</span> <span class="keyword">const</span> int64    child            = 0x40000000L; 
<a name="l00082"></a>00082         <span class="keyword">static</span> <span class="keyword">const</span> int64    popup            = 0x80000000L;
<a name="l00084"></a>00084         <span class="keyword">static</span> <span class="keyword">const</span> int64    clip_children    = 0x02000000L;  
<a name="l00089"></a>00089         <span class="keyword">static</span> <span class="keyword">const</span> int64    clip_siblings    = 0x04000000L; 
<a name="l00091"></a>00091         <span class="keyword">static</span> <span class="keyword">const</span> int64    disabled          = 0x08000000L; 
<a name="l00093"></a>00093         <span class="keyword">static</span> <span class="keyword">const</span> int64    group            = 0x00020000L; 
<a name="l00095"></a>00095         <span class="keyword">static</span> <span class="keyword">const</span> int64    horiz_scroll     = 0x00100000L; 
<a name="l00097"></a>00097         <span class="keyword">static</span> <span class="keyword">const</span> int64    maximize_box         = 0x00010000L; 
<a name="l00099"></a>00099         <span class="keyword">static</span> <span class="keyword">const</span> int64    minimize_box         = 0x00020000L; 
<a name="l00101"></a>00101         <span class="keyword">static</span> <span class="keyword">const</span> int64    thick_frame         = 0x00040000L; 
<a name="l00103"></a>00103         <span class="keyword">static</span> <span class="keyword">const</span> int64    tab_stop         = 0x00010000L; 
<a name="l00105"></a>00105         <span class="keyword">static</span> <span class="keyword">const</span> int64    visible          = 0x10000000L; 
<a name="l00107"></a>00107         <span class="keyword">static</span> <span class="keyword">const</span> int64    vert_scroll      = 0x00200000L;
<a name="l00108"></a>00108 
<a name="l00110"></a>00110         <span class="comment">// Extended styles</span>
<a name="l00111"></a>00111 
<a name="l00113"></a>00113         <span class="keyword">static</span> <span class="keyword">const</span> int64 accept_files        = ((int64)0x00000010L &lt;&lt; 32);
<a name="l00115"></a>00115         <span class="keyword">static</span> <span class="keyword">const</span> int64 app_window          = ((int64)0x00040000L &lt;&lt; 32);
<a name="l00117"></a>00117         <span class="keyword">static</span> <span class="keyword">const</span> int64 client_edge         = ((int64)0x00000200L &lt;&lt; 32);
<a name="l00119"></a>00119         <span class="keyword">static</span> <span class="keyword">const</span> int64 context_help        = ((int64)0x00000400L &lt;&lt; 32);
<a name="l00121"></a>00121         <span class="keyword">static</span> <span class="keyword">const</span> int64 control_parent      = ((int64)0x00010000L &lt;&lt; 32);
<a name="l00123"></a>00123         <span class="keyword">static</span> <span class="keyword">const</span> int64 dlg_modal_frame     = ((int64)0x00000001L &lt;&lt; 32);
<a name="l00125"></a>00125         <span class="keyword">static</span> <span class="keyword">const</span> int64 left_scroll         = ((int64)0x00004000L &lt;&lt; 32);
<a name="l00127"></a>00127         <span class="keyword">static</span> <span class="keyword">const</span> int64 right_aligned       = ((int64)0x00001000L &lt;&lt; 32);
<a name="l00129"></a>00129         <span class="keyword">static</span> <span class="keyword">const</span> int64 static_edge         = ((int64)0x00020000L &lt;&lt; 32);
<a name="l00131"></a>00131         <span class="keyword">static</span> <span class="keyword">const</span> int64 tool_window         = ((int64)0x00000080L &lt;&lt; 32);
<a name="l00133"></a>00133         <span class="keyword">static</span> <span class="keyword">const</span> int64 top_most            = ((int64)0x00000008L &lt;&lt; 32);
<a name="l00135"></a>00135         <span class="keyword">static</span> <span class="keyword">const</span> int64 transparent         = ((int64)0x00000020L &lt;&lt; 32);
<a name="l00137"></a>00137         <span class="keyword">static</span> <span class="keyword">const</span> int64 window_edge         = ((int64)0x00000100L &lt;&lt; 32);
<a name="l00138"></a>00138     };
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="keyword">struct </span>scroll_info {
<a name="l00142"></a>00142         scroll_info() : min_pos(0), max_pos(0), page_size(0), pos(0), track_pos(0) {}
<a name="l00143"></a>00143         <span class="keywordtype">int</span> min_pos;
<a name="l00144"></a>00144         <span class="keywordtype">int</span> max_pos;
<a name="l00145"></a>00145         <span class="keywordtype">int</span> page_size;
<a name="l00146"></a>00146         <span class="keywordtype">int</span> pos;
<a name="l00147"></a>00147         <span class="keywordtype">int</span> track_pos;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     };
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 
<a name="l00160"></a><a class="code" href="structegui_1_1wnd__init.html">00160</a> <span class="keyword">struct </span><a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a> {
<a name="l00161"></a>00161     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>() ;
<a name="l00162"></a>00162     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>(types::int64 style) ;
<a name="l00163"></a>00163     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>(<span class="keyword">const</span> <a class="code" href="structegui_1_1types_1_1rectangle.html" title="Contains a rectangle.">rectangle</a> &amp; r) ;
<a name="l00164"></a>00164     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp; text) ;
<a name="l00165"></a>00165     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>(<span class="keyword">const</span> char_ * text) ;
<a name="l00166"></a>00166     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>(<span class="keyword">const</span> <a class="code" href="structegui_1_1wnd.html" title="Provides indirect access to on-the-screen window objects.">wnd&lt;&gt;</a> &amp; parent) ;
<a name="l00167"></a>00167     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>(<span class="keyword">const</span> <a class="code" href="structegui_1_1window__top.html" title="Base class for all win32gui (and your) window classes.">window_top</a> * parent) ;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>&amp; style(types::int64 s) ;
<a name="l00170"></a>00170     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>&amp; text(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; t) ;
<a name="l00171"></a>00171     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>&amp; rect(<span class="keyword">const</span> <a class="code" href="structegui_1_1types_1_1rectangle.html" title="Contains a rectangle.">rectangle</a> &amp; r);
<a name="l00172"></a>00172     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>&amp; rect(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h);
<a name="l00173"></a>00173     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>&amp; rect(<a class="code" href="structegui_1_1types_1_1point.html" title="point">point</a> p, <a class="code" href="structegui_1_1types_1_1size.html" title="contains a size (width and height)">size</a> s) ;
<a name="l00174"></a>00174     <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>&amp; parent(<span class="keyword">const</span> <a class="code" href="structegui_1_1wnd.html" title="Provides indirect access to on-the-screen window objects.">wnd&lt;&gt;</a> &amp; parent);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="keywordtype">void</span> default_style(types::int64 def) <span class="keyword">const</span>;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="keywordtype">bool</span> m_style_set;
<a name="l00179"></a>00179     <span class="keywordtype">bool</span> m_text_set;
<a name="l00180"></a>00180     <span class="keywordtype">bool</span> m_rect_set;
<a name="l00181"></a>00181     <span class="keywordtype">bool</span> m_parent_set;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     wnd_id_type m_parent;
<a name="l00184"></a>00184     <span class="keyword">mutable</span> types::int64 m_style;
<a name="l00185"></a>00185     <span class="keywordtype">string</span> m_text;
<a name="l00186"></a>00186     <a class="code" href="structegui_1_1types_1_1rectangle.html" title="Contains a rectangle.">rectangle</a> m_rect;
<a name="l00187"></a>00187 };
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 
<a name="l00196"></a><a class="code" href="structegui_1_1window__top.html">00196</a> <span class="keyword">struct </span><a class="code" href="structegui_1_1window__top.html" title="Base class for all win32gui (and your) window classes.">window_top</a> : handle_events::<a class="code" href="structegui_1_1window__top.html" title="Base class for all win32gui (and your) window classes.">window_top</a> {
<a name="l00197"></a>00197 <span class="keyword">protected</span>:
<a name="l00198"></a>00198     <a class="code" href="structegui_1_1window__top.html" title="Base class for all win32gui (and your) window classes.">window_top</a>( wnd_id_type hwnd = 0, <span class="keyword">const</span> <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a> &amp; init = <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a>() ) ;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="keyword">public</span>:
<a name="l00201"></a>00201     <span class="keyword">virtual</span> ~<a class="code" href="structegui_1_1window__top.html" title="Base class for all win32gui (and your) window classes.">window_top</a>();
<a name="l00202"></a>00202     <span class="keywordtype">bool</span> is_valid() <span class="keyword">const</span>;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keyword">virtual</span> <span class="keywordtype">void</span> on_create() {}
<a name="l00205"></a>00205     <span class="keyword">virtual</span> <span class="keywordtype">void</span> on_destroy() {}
<a name="l00206"></a>00206     <span class="keyword">virtual</span> <span class="keywordtype">void</span> on_initialize();
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="keyword">static</span> <span class="keywordtype">string</span> class_name();
<a name="l00209"></a>00209     <span class="keyword">static</span> <span class="keywordtype">int</span> form_id() { <span class="keywordflow">return</span> 0; }
<a name="l00210"></a>00210     <span class="keyword">static</span> types::int64 default_style() ;
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> can_close() <span class="keyword">const</span>;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="keyword">private</span>:
<a name="l00216"></a>00216     <span class="keywordtype">void</span> do_on_any_event(<a class="code" href="structegui_1_1ev_1_1base.html">egui::ev::base</a> &amp; event_arg ) ;
<a name="l00217"></a>00217 <span class="keyword">public</span>:
<a name="l00218"></a>00218     <span class="keyword">virtual</span> <span class="keywordtype">void</span> on_any_event_before(<a class="code" href="structegui_1_1ev_1_1base.html">egui::ev::base</a> &amp; <span class="comment">/* event_arg */</span>) ;
<a name="l00219"></a>00219     <span class="keyword">virtual</span> <span class="keywordtype">void</span> on_any_event_after(<a class="code" href="structegui_1_1ev_1_1base.html">egui::ev::base</a> &amp; <span class="comment">/* event_arg */</span>) ;
<a name="l00220"></a>00220     
<a name="l00221"></a>00221     <span class="keyword">typedef</span> boost::function1&lt;void, egui::ev::base&amp; &gt; on_any_event_func;
<a name="l00222"></a>00222     <span class="keywordtype">void</span> register_on_any_event_handler(on_any_event_func func);
<a name="l00223"></a>00223 
<a name="l00229"></a>00229     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#4d938af937ecd35ca0253998fc9a9992">wait_for</a>( <span class="keyword">const</span> <a class="code" href="structegui_1_1ev_1_1base.html">egui::ev::base</a> &amp; to_wait_for);
<a name="l00230"></a>00230 
<a name="l00235"></a>00235     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#7ad82ed5c2ba3b8abe118af9c9f98a51">set_timer</a>(<span class="keywordtype">int</span> event_id, <span class="keywordtype">unsigned</span> elapse);
<a name="l00239"></a>00239     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#10260975daabcb6f07fab888a64710e0">kill_timer</a>(<span class="keywordtype">int</span> event_id);
<a name="l00240"></a>00240 
<a name="l00242"></a>00242     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#bfc6d2ae4e39432fd9bc6202548cb2fd" title="scrolls the window to that point">do_scroll</a>(<a class="code" href="structegui_1_1types_1_1size.html" title="contains a size (width and height)">size</a> scroll_size);
<a name="l00243"></a>00243 
<a name="l00247"></a>00247     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#4d0d0e4d09cbe555b48992e8c1faa45b">bring_to_top</a>();
<a name="l00248"></a>00248 
<a name="l00253"></a>00253     <a class="code" href="structegui_1_1wnd.html" title="Provides indirect access to on-the-screen window objects.">wnd&lt;&gt;</a> <a class="code" href="structegui_1_1window__top.html#5fee7c42e7ba495d8b90df5dcc554730">child_from_point</a>(<a class="code" href="structegui_1_1types_1_1point.html" title="point">point</a> pnt) <span class="keyword">const</span>;
<a name="l00262"></a>00262     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#de570880b52ed383d5e06cdd85e72cec">flash</a>(<span class="keywordtype">bool</span> invert);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 
<a name="l00268"></a>00268     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#3977449cb62557ed9ccbabba300899e7">do_redraw</a>();
<a name="l00273"></a>00273     <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#d3ef7169d6122cbc2c04781aeb95bc18">set_foreground</a>();
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 <span class="keyword">private</span>:
<a name="l00276"></a>00276     <span class="keywordtype">void</span> send_new_event(egui::ev::new_event_base&amp; evt);
<a name="l00277"></a>00277 <span class="keyword">public</span>:
<a name="l00280"></a><a class="code" href="structegui_1_1window__top.html#3b6c2d5726488a1fa684f67b32fe46ce">00280</a>     <span class="keyword">template</span>&lt;<span class="keyword">class</span> event_type&gt; <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#3b6c2d5726488a1fa684f67b32fe46ce">send_event</a>(<span class="keyword">const</span> event_type &amp; evt) {
<a name="l00281"></a>00281         (egui::ev::new_event_base &amp; )evt; <span class="comment">// make sure it's a custom event</span>
<a name="l00282"></a>00282         boost::shared_ptr&lt;event_type&gt; copy;
<a name="l00283"></a>00283         <span class="keywordflow">if</span> ( evt.already_sent)
<a name="l00284"></a>00284             <span class="comment">// this event has already been sent - right now, we're forwarding it</span>
<a name="l00285"></a>00285             copy = boost::dynamic_pointer_cast&lt;event_type&gt;( <span class="keyword">const_cast&lt;</span>event_type&amp;<span class="keyword">&gt;</span>(evt).shared_from_this() );
<a name="l00286"></a>00286         <span class="keywordflow">else</span> {
<a name="l00287"></a>00287             copy = boost::shared_ptr&lt;event_type&gt;( <span class="keyword">new</span> event_type(evt));
<a name="l00288"></a>00288             copy-&gt;already_sent = <span class="keyword">true</span>;
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290         send_new_event(*copy);
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 <span class="keyword">private</span>:
<a name="l00294"></a>00294     <span class="keyword">static</span> <span class="keywordtype">void</span> register_event_handler_ptr(<span class="keyword">const</span> std::type_info &amp; event_type, new_event_caller_ptr caller);
<a name="l00295"></a>00295     <span class="keyword">static</span> <span class="keywordtype">void</span> add_non_intrusive_handler_ptr(non_intrusive_handler_ptr p);
<a name="l00296"></a>00296 <span class="keyword">public</span>:
<a name="l00299"></a><a class="code" href="structegui_1_1window__top.html#5e42ebea6142a7ff6ca9aa6e30aa665c">00299</a>     <span class="keyword">template</span>&lt;<span class="keyword">class</span> window,<span class="keyword">class</span> holder, <span class="keyword">class</span> event&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#5e42ebea6142a7ff6ca9aa6e30aa665c">register_event_handler</a>(event_handler&lt;event&gt; holder::*data) {        
<a name="l00300"></a>00300         new_event_caller_ptr caller( <span class="keyword">new</span> new_event_caller&lt;window,holder,event&gt;(data) );
<a name="l00301"></a>00301         register_event_handler_ptr(<span class="keyword">typeid</span>(event), caller);
<a name="l00302"></a>00302     }
<a name="l00305"></a><a class="code" href="structegui_1_1window__top.html#9c8f6823ed836ab352a59f4e2618058f">00305</a>     <span class="keyword">template</span>&lt;<span class="keyword">class</span> handler&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structegui_1_1window__top.html#9c8f6823ed836ab352a59f4e2618058f">add_non_intrusive_handler</a> (<span class="keyword">const</span> handler&amp; h) {
<a name="l00306"></a>00306         non_intrusive_handler_ptr p (<span class="keyword">new</span> handler(h));
<a name="l00307"></a>00307         add_non_intrusive_handler_ptr(p);
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 
<a name="l00312"></a><a class="code" href="structegui_1_1window__top.html#660c42b26adc3a83dcd96f2312320c54">00312</a>     property::rw&lt; string&gt; <a class="code" href="structegui_1_1window__top.html#660c42b26adc3a83dcd96f2312320c54" title="the text/caption for the current window">text</a>;
<a name="l00313"></a>00313 
<a name="l00315"></a><a class="code" href="structegui_1_1window__top.html#e8ae673807c9080c79e46acef9b72f43">00315</a>     property::r&lt;types::id&gt; <a class="code" href="structegui_1_1types_1_1id.html">id</a>;
<a name="l00316"></a>00316 
<a name="l00318"></a><a class="code" href="structegui_1_1window__top.html#02f69127314eb1dee2a64cf82cfd58ef">00318</a>     property::r&lt; wnd&lt;&gt; &gt; <a class="code" href="structegui_1_1window__top.html#02f69127314eb1dee2a64cf82cfd58ef" title="the parent window">parent</a>;
<a name="l00319"></a>00319 
<a name="l00321"></a><a class="code" href="structegui_1_1window__top.html#50a02fab5b48dc460c713d0c661aefc0">00321</a>     property::r&lt; wnd&lt;&gt; &gt; <a class="code" href="structegui_1_1window__top.html#50a02fab5b48dc460c713d0c661aefc0" title="the next window in the z-order">next</a>;
<a name="l00322"></a>00322 
<a name="l00324"></a><a class="code" href="structegui_1_1window__top.html#3be029ef7ae8f21fc2e0ebb6fb8db7cf">00324</a>     property::r&lt; wnd&lt;&gt; &gt; <a class="code" href="structegui_1_1window__top.html#3be029ef7ae8f21fc2e0ebb6fb8db7cf" title="the previous window in the z-order">prev</a>;
<a name="l00325"></a>00325 
<a name="l00327"></a><a class="code" href="structegui_1_1window__top.html#ce391d88659948bd7242a43a85040756">00327</a>     property::w&lt;types::shown::type, types::shown&gt; <a class="code" href="structegui_1_1types_1_1shown.html">shown</a>;
<a name="l00328"></a>00328 
<a name="l00330"></a><a class="code" href="structegui_1_1window__top.html#7310225d5b618e32c0cc413dc0c1c46e">00330</a>     property::rw&lt;bool&gt; <a class="code" href="structegui_1_1window__top.html#7310225d5b618e32c0cc413dc0c1c46e" title="whether it&amp;#39;s shown or not">visible</a>;
<a name="l00331"></a>00331 
<a name="l00333"></a><a class="code" href="structegui_1_1window__top.html#3933a2e44068b4eafff79d927e53c473">00333</a>     property::w&lt;bool&gt; <a class="code" href="structegui_1_1window__top.html#3933a2e44068b4eafff79d927e53c473" title="if true, when chaging the window&amp;#39;s appearance, it will redraw; if false, it won&amp;#39;t...">redraw</a>;
<a name="l00334"></a>00334 
<a name="l00336"></a><a class="code" href="structegui_1_1window__top.html#e0901f632eeb90c24651506d7c61b1d1">00336</a>     property::rw&lt;types::int64, types::style&gt; <a class="code" href="structegui_1_1window__top.html#e0901f632eeb90c24651506d7c61b1d1" title="window&amp;#39;s style">style</a>;
<a name="l00337"></a>00337 
<a name="l00339"></a><a class="code" href="structegui_1_1window__top.html#b247b09f0e725754a65ea86e12c80159">00339</a>     property::rw&lt;rectangle&gt; <a class="code" href="structegui_1_1window__top.html#b247b09f0e725754a65ea86e12c80159" title="window rectangle - always relative to parent">full_rect</a>;
<a name="l00341"></a><a class="code" href="structegui_1_1window__top.html#bc2fb5c1b640dc875c6e08bcb108a8f5">00341</a>     property::rw&lt;rectangle&gt; <a class="code" href="structegui_1_1window__top.html#bc2fb5c1b640dc875c6e08bcb108a8f5" title="client rectangle - always relative to self">client_rect</a>;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343 
<a name="l00345"></a><a class="code" href="structegui_1_1window__top.html#89150dc9c437d44eddf4310961df74cd">00345</a>     property_one_arg::rw&lt; types::scroll_info, types::scroll_bar_type::type, types::scroll_bar_type &gt; <a class="code" href="structegui_1_1window__top.html#89150dc9c437d44eddf4310961df74cd" title="scroll information">scroll_info</a>;
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 
<a name="l00349"></a><a class="code" href="structegui_1_1window__top.html#679b3b5438d5e55becb193fe84b80f9b">00349</a>     property_one_arg::w&lt; bool, types::scroll_bar_type::type, types::scroll_bar_type&gt; <a class="code" href="structegui_1_1window__top.html#679b3b5438d5e55becb193fe84b80f9b" title="shows or hides a given scroll bar">show_scroll</a>;
<a name="l00350"></a>00350 
<a name="l00352"></a><a class="code" href="structegui_1_1window__top.html#ffa74f6f0c35a53e5d19a540b43ae1c5">00352</a>     property_one_arg::w&lt; bool, types::scroll_bar_type::type, types::scroll_bar_type&gt; <a class="code" href="structegui_1_1window__top.html#ffa74f6f0c35a53e5d19a540b43ae1c5" title="enables or disables a certain scroll bar">enable_scroll</a>;
<a name="l00353"></a>00353 
<a name="l00355"></a><a class="code" href="structegui_1_1window__top.html#5961576dcb28ed0762bce53f6d6278e3">00355</a>     property::r&lt; wnd&lt;&gt; &gt; <a class="code" href="structegui_1_1window__top.html#5961576dcb28ed0762bce53f6d6278e3" title="Returns the child that is at the top of the Z-order.">top_child_wnd</a>;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 
<a name="l00359"></a><a class="code" href="structegui_1_1window__top.html#ea658eb56f692eb99a2563a04e8ba9ee">00359</a>     property::r&lt; types::int64&gt; <a class="code" href="structegui_1_1window__top.html#ea658eb56f692eb99a2563a04e8ba9ee" title="window&amp;#39;s thread id">thread_id</a>;
<a name="l00361"></a><a class="code" href="structegui_1_1window__top.html#9a1a809eb1c66f7189ca4638662694a6">00361</a>     property::r&lt; types::int64&gt; <a class="code" href="structegui_1_1window__top.html#9a1a809eb1c66f7189ca4638662694a6" title="window&amp;#39;s proces id">process_id</a>;
<a name="l00362"></a>00362 
<a name="l00364"></a><a class="code" href="structegui_1_1window__top.html#5202ea41bc3d3fc8c5e94bf0b8ab6cf5">00364</a>     property::rw&lt; bool&gt; <a class="code" href="structegui_1_1window__top.html#5202ea41bc3d3fc8c5e94bf0b8ab6cf5" title="if true, window is enabled (can receive input from the user)">enabled</a>;
<a name="l00365"></a>00365 
<a name="l00367"></a><a class="code" href="structegui_1_1window__top.html#ba581082ae979fe20c36e49854fd8657">00367</a>     property_one_arg::w&lt;bool, types::capture::type, types::capture &gt; <a class="code" href="structegui_1_1window__top.html#ba581082ae979fe20c36e49854fd8657" title="you can capture mouse and/or keyboard or release it">capture</a>;
<a name="l00368"></a>00368 
<a name="l00370"></a><a class="code" href="structegui_1_1window__top.html#94aa01cdb6390360233a99f6e1c80182">00370</a>     <span class="keyword">static</span> property::r&lt; wnd&lt;&gt; &gt; <a class="code" href="structegui_1_1window__top.html#94aa01cdb6390360233a99f6e1c80182" title="Returns the active window.">active_wnd</a>;
<a name="l00372"></a><a class="code" href="structegui_1_1window__top.html#65c6a69c58ab40ea2ee7887c9d6e1b50">00372</a>     <span class="keyword">static</span> property::r&lt; wnd&lt;&gt; &gt; <a class="code" href="structegui_1_1window__top.html#65c6a69c58ab40ea2ee7887c9d6e1b50" title="Returns the window that has the keyboar focus, or null if there&amp;#39;s no such window...">keyboard_focus_wnd</a>;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374     <span class="comment">/* </span>
<a name="l00375"></a>00375 <span class="comment">        to be implemented at a later time</span>
<a name="l00376"></a>00376 <span class="comment"></span>
<a name="l00377"></a>00377 <span class="comment">        FIXME - font</span>
<a name="l00378"></a>00378 <span class="comment">        - icon</span>
<a name="l00379"></a>00379 <span class="comment"></span>
<a name="l00380"></a>00380 <span class="comment">    */</span>
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 <span class="keyword">protected</span>:
<a name="l00383"></a>00383     <span class="keyword">mutable</span> critical_section cs;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="comment">// creation information</span>
<a name="l00386"></a>00386     <span class="keyword">const</span> <a class="code" href="structegui_1_1wnd__init.html" title="Easy way to pass common args when constructing windows.">wnd_init</a> m_init;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 <span class="keyword">private</span>:
<a name="l00389"></a>00389 <span class="preprocessor">#ifdef BUILDING_EGUI</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>    <span class="keyword">friend</span> <span class="keyword">struct </span>detail::window_manager;
<a name="l00391"></a>00391     <span class="keyword">friend</span> <span class="keyword">struct </span>detail::event_manager;
<a name="l00392"></a>00392 <span class="preprocessor">#endif</span>
<a name="l00393"></a>00393 <span class="preprocessor"></span>
<a name="l00394"></a>00394     <span class="comment">// if this is false, we're been destroyed from the screen</span>
<a name="l00395"></a>00395     <span class="keywordtype">bool</span> m_still_alive;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="comment">// the window handle</span>
<a name="l00398"></a>00398     wnd_id_type m_hwnd;
<a name="l00399"></a>00399     
<a name="l00400"></a>00400     <span class="keyword">struct </span>impl;
<a name="l00401"></a>00401     <span class="keyword">friend</span> <span class="keyword">struct </span>impl;
<a name="l00402"></a>00402     boost::shared_ptr&lt;impl&gt; m_impl;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="comment">// event handlers, if any</span>
<a name="l00405"></a>00405     <span class="keyword">typedef</span> std::vector&lt;on_any_event_func&gt; on_any_event_array;
<a name="l00406"></a>00406     on_any_event_array m_on_any_event;
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="comment">// if true, we're in the "wait_for" function</span>
<a name="l00409"></a>00409     <span class="keywordtype">bool</span> m_is_waiting;
<a name="l00410"></a>00410 };
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 <span class="keyword">struct </span>window_base : <span class="keyword">virtual</span> <a class="code" href="structegui_1_1window__top.html" title="Base class for all win32gui (and your) window classes.">window_top</a> 
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415 };
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 
<a name="l00423"></a>00423 <span class="keyword">const</span> <span class="keywordtype">void</span>* raw_hwnd(<span class="keyword">const</span> wnd&lt;&gt; &amp; w);
<a name="l00424"></a>00424 <span class="keyword">const</span> <span class="keywordtype">void</span>* raw_hwnd(<span class="keyword">const</span> window_top *w);
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 <span class="preprocessor">#ifdef BUILDING_EGUI</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span>HWND get_hwnd(<span class="keyword">const</span> wnd&lt;&gt; &amp; w);
<a name="l00428"></a>00428 HWND get_hwnd(<span class="keyword">const</span> window_top *w);
<a name="l00429"></a>00429 <span class="preprocessor">#endif</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span>
<a name="l00431"></a>00431 }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433 <span class="preprocessor">#endif</span>
<a name="l00434"></a>00434 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 2 10:04:32 2008 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
